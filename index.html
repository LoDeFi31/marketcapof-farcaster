<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Cupping Caf√©</title><link rel="manifest" href="/manifest.json"/><meta name="theme-color" content="#6750A4"/><style>body{font-family:system-ui,sans-serif;margin:0;background:#fafafa}header{padding:16px;background:#6750A4;color:#fff}main{padding:16px;max-width:600px;margin:0 auto}.card{background:#fff;border-radius:12px;padding:16px;margin-bottom:16px;box-shadow:0 1px 4px rgba(0,0,0,.08)}.section-title{font-weight:600;margin-bottom:8px}.row{display:flex;justify-content:space-between;align-items:center;margin:8px 0}.row label{font-size:.9rem}.row input[type=number]{width:56px;padding:4px}.slider{width:100%}textarea{width:100%;min-height:80px;padding:8px;border-radius:8px;border:1px solid #ddd}.score-final{font-size:1.4rem;font-weight:700;text-align:center}.fab{position:fixed;bottom:16px;right:16px;background:#6750A4;color:#fff;border-radius:999px;padding:12px 20px;border:none;font-weight:600;box-shadow:0 4px 12px rgba(0,0,0,.25)}.aroma-selector{margin-top:12px}.aroma-family{margin-bottom:12px}.family-header{background:#f0f0f0;padding:8px 12px;border-radius:8px;cursor:pointer;user-select:none;font-weight:600;display:flex;justify-content:space-between;align-items:center}.family-header:hover{background:#e8e8e8}.family-content{display:none;padding:8px 0}.family-content.active{display:block}.aroma-group{margin:8px 0 8px 16px}.group-title{font-size:.85rem;font-weight:600;color:#666;margin-bottom:4px}.aroma-tags{display:flex;flex-wrap:wrap;gap:6px}.aroma-tag{display:inline-block;padding:4px 12px;border-radius:16px;font-size:.85rem;cursor:pointer;border:2px solid transparent;transition:all .2s}.aroma-tag:hover{transform:scale(1.05)}.aroma-tag.selected{border-color:#333;font-weight:600}.selected-aromas{margin-top:8px;min-height:32px;display:flex;flex-wrap:wrap;gap:6px;padding:8px;background:#f9f9f9;border-radius:8px}.selected-aroma{display:inline-flex;align-items:center;gap:4px;padding:4px 8px;border-radius:12px;font-size:.8rem;font-weight:500}.remove-aroma{cursor:pointer;font-weight:bold;margin-left:4px}</style></head><body><header><h1>Cupping Caf√©</h1><div style="font-size:.9rem;opacity:.9">Session de d√©gustation</div></header><main><section class="card"><div class="section-title">Caf√©</div><input id="coffeeName" type="text" placeholder="Nom du caf√© / lot" style="width:100%;padding:8px;border-radius:8px;border:1px solid #ddd"></section><section class="card"><div class="section-title">Roast level (6‚Äì10)</div><div class="row"><label for="roastScore">Score</label><input id="roastScore" type="number" min="6" max="10" value="8" oninput="updateFromInput('roastScore','roastRange')"></div><input id="roastRange" class="slider" type="range" min="6" max="10" value="8" oninput="updateFromRange('roastRange','roastScore')"></section><section class="card"><div class="section-title">Fragrance / Ar√¥mes (6‚Äì10)</div><div class="row"><label for="fragranceScore">Score</label><input id="fragranceScore" type="number" min="6" max="10" value="8" oninput="updateFromInput('fragranceScore','fragranceRange')"></div><input id="fragranceRange" class="slider" type="range" min="6" max="10" value="8" oninput="updateFromRange('fragranceRange','fragranceScore')"><div class="aroma-selector"><div class="selected-aromas" id="selectedAromas"></div><div class="aroma-family"><div class="family-header" onclick="toggleFamily(this)">üçá Fruit√©<span>‚ñº</span></div><div class="family-content"><div class="aroma-group"><div class="group-title">Fruits Rouges</div><div class="aroma-tags"><span class="aroma-tag" style="background:#e57373;color:#fff" onclick="selectAroma(this,'Cerise')">Cerise</span><span class="aroma-tag" style="background:#ef5350;color:#fff" onclick="selectAroma(this,'Fraise')">Fraise</span><span class="aroma-tag" style="background:#f06292;color:#fff" onclick="selectAroma(this,'Framboise')">Framboise</span><span class="aroma-tag" style="background:#e91e63;color:#fff" onclick="selectAroma(this,'M√ªre')">M√ªre</span><span class="aroma-tag" style="background:#c62828;color:#fff" onclick="selectAroma(this,'Cranberry')">Cranberry</span></div></div><div class="aroma-group"><div class="group-title">Agrumes</div><div class="aroma-tags"><span class="aroma-tag" style="background:#ffd54f;color:#333" onclick="selectAroma(this,'Citron')">Citron</span><span class="aroma-tag" style="background:#ffb74d;color:#333" onclick="selectAroma(this,'Orange')">Orange</span><span class="aroma-tag" style="background:#fff59d;color:#333" onclick="selectAroma(this,'Pamplemousse')">Pamplemousse</span><span class="aroma-tag" style="background:#ffe082;color:#333" onclick="selectAroma(this,'Bergamote')">Bergamote</span><span class="aroma-tag" style="background:#ffecb3;color:#333" onclick="selectAroma(this,'Mandarine')">Mandarine</span></div></div><div class="aroma-group"><div class="group-title">Fruits √† Noyau</div><div class="aroma-tags"><span class="aroma-tag" style="background:#ffab91;color:#333" onclick="selectAroma(this,'P√™che')">P√™che</span><span class="aroma-tag" style="background:#ff8a65;color:#fff" onclick="selectAroma(this,'Abricot')">Abricot</span><span class="aroma-tag" style="background:#d32f2f;color:#fff" onclick="selectAroma(this,'Prune')">Prune</span></div></div><div class="aroma-group"><div class="group-title">Fruits Tropicaux</div><div class="aroma-tags"><span class="aroma-tag" style="background:#fff176;color:#333" onclick="selectAroma(this,'Ananas')">Ananas</span><span class="aroma-tag" style="background:#ffee58;color:#333" onclick="selectAroma(this,'Mangue')">Mangue</span><span class="aroma-tag" style="background:#fff9c4;color:#333" onclick="selectAroma(this,'Fruit de la passion')">Fruit de la passion</span><span class="aroma-tag" style="background:#ffca28;color:#333" onclick="selectAroma(this,'Papaye')">Papaye</span></div></div></div></div><div class="aroma-family"><div class="family-header" onclick="toggleFamily(this)">üå∏ Floral<span>‚ñº</span></div><div class="family-content"><div class="aroma-group"><div class="group-title">Fleurs</div><div class="aroma-tags"><span class="aroma-tag" style="background:#ce93d8;color:#fff" onclick="selectAroma(this,'Jasmin')">Jasmin</span><span class="aroma-tag" style="background:#ba68c8;color:#fff" onclick="selectAroma(this,'Rose')">Rose</span><span class="aroma-tag" style="background:#e1bee7;color:#333" onclick="selectAroma(this,'Lavande')">Lavande</span><span class="aroma-tag" style="background:#f3e5f5;color:#333" onclick="selectAroma(this,'Fleur d\'oranger')">Fleur d'oranger</span><span class="aroma-tag" style="background:#ea80fc;color:#fff" onclick="selectAroma(this,'Hibiscus')">Hibiscus</span></div></div></div></div><div class="aroma-family"><div class="family-header" onclick="toggleFamily(this)">üå∂ √âpic√©<span>‚ñº</span></div><div class="family-content"><div class="aroma-group"><div class="group-title">√âpices</div><div class="aroma-tags"><span class="aroma-tag" style="background:#a1887f;color:#fff" onclick="selectAroma(this,'Cannelle')">Cannelle</span><span class="aroma-tag" style="background:#8d6e63;color:#fff" onclick="selectAroma(this,'Clou de girofle')">Clou de girofle</span><span class="aroma-tag" style="background:#6d4c41;color:#fff" onclick="selectAroma(this,'Muscade')">Muscade</span><span class="aroma-tag" style="background:#795548;color:#fff" onclick="selectAroma(this,'Gingembre')">Gingembre</span><span class="aroma-tag" style="background:#5d4037;color:#fff" onclick="selectAroma(this,'Poivre')">Poivre</span><span class="aroma-tag" style="background:#bcaaa4;color:#333" onclick="selectAroma(this,'Cardamome')">Cardamome</span></div></div></div></div><div class="aroma-family"><div class="family-header" onclick="toggleFamily(this)">üç´ Chocolat / Noix<span>‚ñº</span></div><div class="family-content"><div class="aroma-group"><div class="group-title">Chocolat</div><div class="aroma-tags"><span class="aroma-tag" style="background:#3e2723;color:#fff" onclick="selectAroma(this,'Chocolat noir')">Chocolat noir</span><span class="aroma-tag" style="background:#4e342e;color:#fff" onclick="selectAroma(this,'Chocolat au lait')">Chocolat au lait</span><span class="aroma-tag" style="background:#6d4c41;color:#fff" onclick="selectAroma(this,'Cacao')">Cacao</span></div></div><div class="aroma-group"><div class="group-title">Noix</div><div class="aroma-tags"><span class="aroma-tag" style="background:#d7ccc8;color:#333" onclick="selectAroma(this,'Noisette')">Noisette</span><span class="aroma-tag" style="background:#a1887f;color:#fff" onclick="selectAroma(this,'Amande')">Amande</span><span class="aroma-tag" style="background:#8d6e63;color:#fff" onclick="selectAroma(this,'Noix')">Noix</span><span class="aroma-tag" style="background:#bcaaa4;color:#333" onclick="selectAroma(this,'Cacahu√®te')">Cacahu√®te</span></div></div></div></div><div class="aroma-family"><div class="family-header" onclick="toggleFamily(this)">üçØ Caram√©lis√©<span>‚ñº</span></div><div class="family-content"><div class="aroma-group"><div class="group-title">Sucr√©</div><div class="aroma-tags"><span class="aroma-tag" style="background:#ff6f00;color:#fff" onclick="selectAroma(this,'Caramel')">Caramel</span><span class="aroma-tag" style="background:#e65100;color:#fff" onclick="selectAroma(this,'Miel')">Miel</span><span class="aroma-tag" style="background:#ffab00;color:#333" onclick="selectAroma(this,'Sirop d\'\u00e9rable')">Sirop d'√©rable</span><span class="aroma-tag" style="background:#ff8f00;color:#fff" onclick="selectAroma(this,'M√©lasse')">M√©lasse</span></div></div></div></div><div class="aroma-family"><div class="family-header" onclick="toggleFamily(this)">üåæ C√©r√©ales / Pain<span>‚ñº</span></div><div class="family-content"><div class="aroma-group"><div class="group-title">C√©r√©ales</div><div class="aroma-tags"><span class="aroma-tag" style="background:#ffe0b2;color:#333" onclick="selectAroma(this,'Pain grill√©')">Pain grill√©</span><span class="aroma-tag" style="background:#ffcc80;color:#333" onclick="selectAroma(this,'Malt')">Malt</span><span class="aroma-tag" style="background:#ffb74d;color:#333" onclick="selectAroma(this,'Biscuit')">Biscuit</span><span class="aroma-tag" style="background:#ffa726;color:#333" onclick="selectAroma(this,'Pain')">Pain</span></div></div></div></div></div></section><section class="card"><div class="section-title">Flavor (6‚Äì10)</div><div class="row"><label for="flavorScore">Score</label><input id="flavorScore" type="number" min="6" max="10" value="8" oninput="updateFromInput('flavorScore','flavorRange')"></div><input id="flavorRange" class="slider" type="range" min="6" max="10" value="8" oninput="updateFromRange('flavorRange','flavorScore')"></section><section class="card"><div class="section-title">Aftertaste (6‚Äì10)</div><div class="row"><label for="aftertasteScore">Score</label><input id="aftertasteScore" type="number" min="6" max="10" value="8" oninput="updateFromInput('aftertasteScore','aftertasteRange')"></div><input id="aftertasteRange" class="slider" type="range" min="6" max="10" value="8" oninput="updateFromRange('aftertasteRange','aftertasteScore')"></section><section class="card"><div class="section-title">Acidit√© (6‚Äì10)</div><div class="row"><label for="acidityScore">Score</label><input id="acidityScore" type="number" min="6" max="10" value="8" oninput="updateFromInput('acidityScore','acidityRange')"></div><input id="acidityRange" class="slider" type="range" min="6" max="10" value="8" oninput="updateFromRange('acidityRange','acidityScore')"></section><section class="card"><div class="section-title">Body (6‚Äì10)</div><div class="row"><label for="bodyScore">Score</label><input id="bodyScore" type="number" min="6" max="10" value="8" oninput="updateFromInput('bodyScore','bodyRange')"></div><input id="bodyRange" class="slider" type="range" min="6" max="10" value="8" oninput="updateFromRange('bodyRange','bodyScore')"></section><section class="card"><div class="section-title">Balance (6‚Äì10)</div><div class="row"><label for="balanceScore">Score</label><input id="balanceScore" type="number" min="6" max="10" value="8" oninput="updateFromInput('balanceScore','balanceRange')"></div><input id="balanceRange" class="slider" type="range" min="6" max="10" value="8" oninput="updateFromRange('balanceRange','balanceScore')"></section><section class="card"><div class="section-title">Uniformit√© / Clean cup / Sucrosit√© (6‚Äì10)</div><div class="row"><label for="uniformityScore">Uniformit√©</label><input id="uniformityScore" type="number" min="6" max="10" value="8" oninput="updateFinal()"></div><div class="row"><label for="cleanScore">Clean cup</label><input id="cleanScore" type="number" min="6" max="10" value="8" oninput="updateFinal()"></div><div class="row"><label for="sweetnessScore">Sucrosit√©</label><input id="sweetnessScore" type="number" min="6" max="10" value="8" oninput="updateFinal()"></div></section><section class="card"><div class="section-title">Overall (6‚Äì10)</div><div class="row"><label for="overallScore">Note globale</label><input id="overallScore" type="number" min="6" max="10" value="8" oninput="updateFinal()"></div></section><section class="card"><div class="section-title">Commentaires</div><textarea id="comments" placeholder="Notes de d√©gustation..."></textarea></section><section class="card"><div class="section-title">Score final</div><div id="finalScore" class="score-final">0.0</div></section></main><button class="fab" onclick="updateFinal()">Recalculer</button><script>const fieldsForAverage=['roastScore','fragranceScore','flavorScore','aftertasteScore','acidityScore','bodyScore','balanceScore','uniformityScore','cleanScore','sweetnessScore','overallScore'];let selectedAromas=[];function clamp(val){const n=Number(val);if(Number.isNaN(n))return 6;return Math.min(10,Math.max(6,n))}function updateFromRange(rangeId,inputId){const v=document.getElementById(rangeId).value;document.getElementById(inputId).value=v;updateFinal()}function updateFromInput(inputId,rangeId){const input=document.getElementById(inputId);const v=clamp(input.value);input.value=v;document.getElementById(rangeId).value=v;updateFinal()}function updateFinal(){let sum=0;fieldsForAverage.forEach(id=>{const el=document.getElementById(id);sum+=clamp(el.value)});const avg=sum/fieldsForAverage.length;document.getElementById('finalScore').textContent=avg.toFixed(1)}function toggleFamily(header){const content=header.nextElementSibling;const arrow=header.querySelector('span');content.classList.toggle('active');arrow.textContent=content.classList.contains('active')?'‚ñ≤':'‚ñº'}function selectAroma(tag,name){const index=selectedAromas.indexOf(name);if(index>-1){selectedAromas.splice(index,1);tag.classList.remove('selected')}else{selectedAromas.push(name);tag.classList.add('selected')}renderSelectedAromas()}function renderSelectedAromas(){const container=document.getElementById('selectedAromas');container.innerHTML='';selectedAromas.forEach(aroma=>{const tag=document.createElement('div');tag.className='selected-aroma';const aromaSpan=document.createElement('span');aromaSpan.textContent=aroma;const colors={'Cerise':'#e57373','Fraise':'#ef5350','Framboise':'#f06292','M√ªre':'#e91e63','Cranberry':'#c62828','Citron':'#ffd54f','Orange':'#ffb74d','Pamplemousse':'#fff59d','Bergamote':'#ffe082','Mandarine':'#ffecb3','P√™che':'#ffab91','Abricot':'#ff8a65','Prune':'#d32f2f','Ananas':'#fff176','Mangue':'#ffee58','Fruit de la passion':'#fff9c4','Papaye':'#ffca28','Jasmin':'#ce93d8','Rose':'#ba68c8','Lavande':'#e1bee7','Fleur d\'oranger':'#f3e5f5','Hibiscus':'#ea80fc','Cannelle':'#a1887f','Clou de girofle':'#8d6e63','Muscade':'#6d4c41','Gingembre':'#795548','Poivre':'#5d4037','Cardamome':'#bcaaa4','Chocolat noir':'#3e2723','Chocolat au lait':'#4e342e','Cacao':'#6d4c41','Noisette':'#d7ccc8','Amande':'#a1887f','Noix':'#8d6e63','Cacahu√®te':'#bcaaa4','Caramel':'#ff6f00','Miel':'#e65100','Sirop d\'\u00e9rable':'#ffab00','M√©lasse':'#ff8f00','Pain grill√©':'#ffe0b2','Malt':'#ffcc80','Biscuit':'#ffb74d','Pain':'#ffa726'};const bgColor=colors[aroma]||'#ddd';const isLight=['#fff176','#ffee58','#fff9c4','#ffca28','#ffd54f','#fff59d','#ffe082','#ffecb3','#ffab91','#f3e5f5','#ffe0b2','#ffcc80','#ffb74d','#ffa726','#d7ccc8','#bcaaa4','#ffab00'].includes(bgColor);tag.style.background=bgColor;tag.style.color=isLight?'#333':'#fff';const removeBtn=document.createElement('span');removeBtn.className='remove-aroma';removeBtn.textContent='√ó';removeBtn.onclick=()=>{selectedAromas=selectedAromas.filter(a=>a!==aroma);document.querySelectorAll('.aroma-tag').forEach(t=>{if(t.textContent===aroma)t.classList.remove('selected')});renderSelectedAromas()};tag.appendChild(aromaSpan);tag.appendChild(removeBtn);container.appendChild(tag)})}updateFinal();if('serviceWorker'in navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register('/sw.js')})}</script></body></html>
